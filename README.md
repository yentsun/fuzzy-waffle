How to
======

Install the dependencies:
-------------------------

```
npm i
```

Get the credentials from the author 
-----------------------------------

You will need two secrets:

- database password
- Affluent dev user password (given in the task)


Run the script
--------------

You have to run the script with two parameters:

```
$ node index.js <database password> <affluent user password>
```

This may vary on different OS systems. The script has been developed on 
Node `v14.15.0`


Expected output
---------------

You should see something similar to:

```
> launching puppeteer
> going to https://develop.pub.afflu.net
> logging in
> going to https://develop.pub.afflu.net/list?type=dates
> setting date range
> waiting for data
> got data:
┌─────────┬──────────────┬──────────┬─────┬───┬──────┬──────┬───┬──────┐
│ (index) │      0       │    1     │  2  │ 3 │  4   │  5   │ 6 │  7   │
├─────────┼──────────────┼──────────┼─────┼───┼──────┼──────┼───┼──────┤
│    0    │ '2020-10-30' │ 8375.22  │ 318 │ 0 │ 3585 │ 0.46 │ 0 │ 3.88 │
│    1    │ '2020-10-29' │ 1221.18  │ 314 │ 0 │ 3842 │ 0.32 │ 0 │ 4.29 │
│    2    │ '2020-10-28' │ 13720.43 │ 224 │ 0 │ 2724 │ 0.27 │ 0 │ 4.59 │
│    3    │ '2020-10-27' │ 1433.16  │ 244 │ 0 │ 3555 │ 0.4  │ 0 │ 4.3  │
│    4    │ '2020-10-26' │ 7663.75  │ 221 │ 0 │ 2981 │ 0.39 │ 0 │ 4.6  │
│    5    │ '2020-10-25' │ 2034.28  │ 303 │ 0 │ 3633 │ 0.38 │ 0 │ 4.93 │
│    6    │ '2020-10-24' │  960.14  │ 239 │ 0 │ 3553 │ 0.27 │ 0 │ 4.5  │
│    7    │ '2020-10-23' │  942.27  │ 233 │ 0 │ 2485 │ 0.38 │ 0 │ 5.83 │
│    8    │ '2020-10-22' │ 1129.42  │ 216 │ 0 │ 2413 │ 0.47 │ 0 │ 5.18 │
│    9    │ '2020-10-21' │ 2606.91  │ 241 │ 0 │ 2789 │ 0.46 │ 0 │ 5.52 │
│   10    │ '2020-10-20' │  1122.2  │ 178 │ 0 │ 2662 │ 0.42 │ 0 │ 4.17 │
│   11    │ '2020-10-19' │ 1909.58  │ 187 │ 0 │ 4604 │ 0.39 │ 0 │ 2.26 │
│   12    │ '2020-10-18' │ 1965.15  │ 265 │ 0 │ 2881 │ 0.68 │ 0 │ 6.66 │
│   13    │ '2020-10-17' │ 1831.23  │ 242 │ 0 │ 3009 │ 0.61 │ 0 │ 5.72 │
│   14    │ '2020-10-16' │ 1129.81  │ 227 │ 0 │ 2256 │ 0.5  │ 0 │ 6.87 │
│   15    │ '2020-10-15' │  754.96  │ 218 │ 0 │ 2058 │ 0.37 │ 0 │ 7.48 │
│   16    │ '2020-10-14' │ 2365.93  │ 220 │ 0 │ 2322 │ 0.46 │ 0 │ 6.76 │
│   17    │ '2020-10-13' │  738.15  │ 223 │ 0 │ 2606 │ 0.28 │ 0 │ 6.33 │
│   18    │ '2020-10-12' │ 1173.85  │ 268 │ 0 │ 2907 │ 0.4  │ 0 │ 6.74 │
│   19    │ '2020-10-11' │ 2272.54  │ 323 │ 0 │ 5288 │ 0.31 │ 0 │ 4.54 │
│   20    │ '2020-10-10' │  638.83  │ 286 │ 0 │ 2850 │ 0.22 │ 0 │ 8.11 │
│   21    │ '2020-10-09' │  998.79  │ 235 │ 0 │ 2394 │ 0.42 │ 0 │ 6.68 │
│   22    │ '2020-10-08' │  995.68  │ 231 │ 0 │ 2888 │ 0.34 │ 0 │ 6.16 │
│   23    │ '2020-10-07' │ 1249.56  │ 275 │ 0 │ 2914 │ 0.43 │ 0 │ 7.1  │
│   24    │ '2020-10-06' │ 1298.12  │ 337 │ 0 │ 3084 │ 0.42 │ 0 │ 8.24 │
│   25    │ '2020-10-05' │ 3648.08  │ 250 │ 0 │ 2604 │ 0.4  │ 0 │ 7.49 │
│   26    │ '2020-10-04' │  771.97  │ 279 │ 0 │ 3059 │ 0.25 │ 0 │ 6.57 │
│   27    │ '2020-10-03' │ 1101.92  │ 273 │ 0 │ 3243 │ 0.34 │ 0 │ 6.07 │
│   28    │ '2020-10-02' │ 2209.24  │ 237 │ 0 │ 2782 │ 0.31 │ 0 │ 6.51 │
│   29    │ '2020-10-01' │  1103.3  │ 262 │ 0 │ 3270 │ 0.34 │ 0 │ 5.5  │
└─────────┴──────────────┴──────────┴─────┴───┴──────┴──────┴───┴──────┘
> connecting to database
> creating table
> storing data
> retrieving data
┌─────────┬──────────────┬────────────┬───────┬───────┬────────┬────────┬─────────────┬────────┐
│ (index) │     date     │   total    │ sales │ leads │ clicks │  epc   │ impressions │   cr   │
├─────────┼──────────────┼────────────┼───────┼───────┼────────┼────────┼─────────────┼────────┤
│    0    │ '10/01/2020' │ '1103.30'  │  262  │   0   │  3270  │ '0.34' │      0      │ '5.50' │
│    1    │ '10/02/2020' │ '2209.24'  │  237  │   0   │  2782  │ '0.31' │      0      │ '6.51' │
│    2    │ '10/03/2020' │ '1101.92'  │  273  │   0   │  3243  │ '0.34' │      0      │ '6.07' │
│    3    │ '10/04/2020' │  '771.97'  │  279  │   0   │  3059  │ '0.25' │      0      │ '6.57' │
│    4    │ '10/05/2020' │ '3648.08'  │  250  │   0   │  2604  │ '0.40' │      0      │ '7.49' │
│    5    │ '10/06/2020' │ '1298.12'  │  337  │   0   │  3084  │ '0.42' │      0      │ '8.24' │
│    6    │ '10/07/2020' │ '1249.56'  │  275  │   0   │  2914  │ '0.43' │      0      │ '7.10' │
│    7    │ '10/08/2020' │  '995.68'  │  231  │   0   │  2888  │ '0.34' │      0      │ '6.16' │
│    8    │ '10/09/2020' │  '998.79'  │  235  │   0   │  2394  │ '0.42' │      0      │ '6.68' │
│    9    │ '10/10/2020' │  '638.83'  │  286  │   0   │  2850  │ '0.22' │      0      │ '8.11' │
│   10    │ '10/11/2020' │ '2272.54'  │  323  │   0   │  5288  │ '0.31' │      0      │ '4.54' │
│   11    │ '10/12/2020' │ '1173.85'  │  268  │   0   │  2907  │ '0.40' │      0      │ '6.74' │
│   12    │ '10/13/2020' │  '738.15'  │  223  │   0   │  2606  │ '0.28' │      0      │ '6.33' │
│   13    │ '10/14/2020' │ '2365.93'  │  220  │   0   │  2322  │ '0.46' │      0      │ '6.76' │
│   14    │ '10/15/2020' │  '754.96'  │  218  │   0   │  2058  │ '0.37' │      0      │ '7.48' │
│   15    │ '10/16/2020' │ '1129.81'  │  227  │   0   │  2256  │ '0.50' │      0      │ '6.87' │
│   16    │ '10/17/2020' │ '1831.23'  │  242  │   0   │  3009  │ '0.61' │      0      │ '5.72' │
│   17    │ '10/18/2020' │ '1965.15'  │  265  │   0   │  2881  │ '0.68' │      0      │ '6.66' │
│   18    │ '10/19/2020' │ '1909.58'  │  187  │   0   │  4604  │ '0.39' │      0      │ '2.26' │
│   19    │ '10/20/2020' │ '1122.20'  │  178  │   0   │  2662  │ '0.42' │      0      │ '4.17' │
│   20    │ '10/21/2020' │ '2606.91'  │  241  │   0   │  2789  │ '0.46' │      0      │ '5.52' │
│   21    │ '10/22/2020' │ '1129.42'  │  216  │   0   │  2413  │ '0.47' │      0      │ '5.18' │
│   22    │ '10/23/2020' │  '942.27'  │  233  │   0   │  2485  │ '0.38' │      0      │ '5.83' │
│   23    │ '10/24/2020' │  '960.14'  │  239  │   0   │  3553  │ '0.27' │      0      │ '4.50' │
│   24    │ '10/25/2020' │ '2034.28'  │  303  │   0   │  3633  │ '0.38' │      0      │ '4.93' │
│   25    │ '10/26/2020' │ '7663.75'  │  221  │   0   │  2981  │ '0.39' │      0      │ '4.60' │
│   26    │ '10/27/2020' │ '1433.16'  │  244  │   0   │  3555  │ '0.40' │      0      │ '4.30' │
│   27    │ '10/28/2020' │ '13720.43' │  224  │   0   │  2724  │ '0.27' │      0      │ '4.59' │
│   28    │ '10/29/2020' │ '1221.18'  │  314  │   0   │  3842  │ '0.32' │      0      │ '4.29' │
│   29    │ '10/30/2020' │ '8375.22'  │  318  │   0   │  3585  │ '0.46' │      0      │ '3.88' │
└─────────┴──────────────┴────────────┴───────┴───────┴────────┴────────┴─────────────┴────────┘
> done

Process finished with exit code 0
```
